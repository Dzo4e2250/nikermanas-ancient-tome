# Main application server
server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # SPA fallback
  location / {
    try_files $uri $uri/ /index.html;
  }

  # error page fallback
  error_page 404 /index.html;
  location = /50x.html {
    root /usr/share/nginx/html;
  }
}

# Coming soon page server
server {
  listen 5677;
  server_name _;

  root /usr/share/nginx/html;
  index coming-soon.html;

  location / {
    try_files $uri $uri/ /coming-soon.html;
  }

  # Serve the coming soon page for all requests
  location = / {
    return 301 /coming-soon.html;
  }

  error_page 404 /coming-soon.html;
}
